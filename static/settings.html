<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description"
    content="Snorlax's Cave brings your students the best learning methods and skills to help them be the best and most efficient at studying!" />
  <meta property="og:image" content="/assets/img/newlogo.png">
  <meta name="image" content="/assets/img/newlogo.png">
  <meta name="sps-bot" content="true">
  <title>Settings | Snorlax's Cave</title>
  <link rel="icon" href="/assets/img/newlogo.png">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/assets/css/style.css" />
  <link rel="stylesheet" href="/assets/css/settings.css" />
  <link rel="stylesheet" href="/assets/css/animations.css" />
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/overlayscrollbars/2.9.1/browser/overlayscrollbars.browser.es6.min.js"
    integrity="sha512-chZL0lDIW31v1Ip6tSicC+aZh08OYCELTCOwhOqQ6dRYkJ/39nLzlNQNVdTTYnl37WTvN8W0hcsqn9eSr4CNaQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/overlayscrollbars/2.9.1/styles/overlayscrollbars.css"
    integrity="sha512-g4z2p+tZ19ItLJc8gN2oL7idby+WPtsaSdYkA5AKtsGjzxovfhn8Ozd4zF92otlg4wWwwnn+iPxlUKswZPHLTQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="/assets/js/functions.js"></script>
</head>

<body>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZTCTYH80S1"></script>
  <nav style="margin-top: -80px;">
    <div class="heading">
      <a href="/#" class="headinglink">Snorlax's Cave</a>
    </div>
    <ul class="nav-links">
      <li><a href="/">Home</a></li>
      <li><a href="/math">Games</a></li>
      <li><a href="/english">Apps</a></li>
      <li><a href="/about">About</a></li>
      <li><a href="/settings" class="active">Settings</a></li>
    </ul>
  </nav>
  <div
    style="display: flex; flex-wrap: wrap; justify-content: center; align-items: center; padding: 20px; margin-top: 80px; gap:30px;">
    <div class="setting">
      <br>
      <h1 class="large">Change Tab Name</h1>
      <br>
      <input class="search-bar" style="width:250px;height:50px;margin:10px; color: white;border-radius:999px;"
        type="text" id="name" placeholder="Enter A New Name">
      <button class="sbtn" onclick="changeTabName()">Change</button>
      <br>
      <br>
      <h1 class="large">Change Tab Icon</h1>
      <br>
      <input class="search-bar" style="width:250px;height:50px;margin:10px;border-radius:999px;" type="text"
        id="iconUrl" placeholder="Enter icon URL">
      <button class="sbtn" onclick="changeIcon()">Change</button>
    </div>
    <div class="setting">
      <br>
      <h1 class="large">Background Changer</h1>
      <div class="search-results"
        style="display: block;justify-content: center; flex-wrap: wrap; gap:10px;margin-top:10px;">
        <input class="search-bar" style="width:350px;height:50px;margin:10px;" id="imageUrl" type="text"
          placeholder="Enter image URL">
        <button class="sbtn" onclick="setImageBackground()" style="width:296.92px;height:45px;">Save changes</button>

      </div>
      <br>
      <h1 class="large">Upload from file</h1>
      <br>
      <button class="sbtn" onclick="loadFile()">Upload Background</button>
      <button class="sbtn" style="width: 148.46px;"
        onclick="localStorage.removeItem('backgroundImage');window.location.reload();">Reset</button>
      <input type="file" accept="image/*" id="fileInput" style="display: none;" onchange="showImage(event)">
    </div>
    <div class="setting">
      <br>
      <br>
      <h1 class="large">About:Blank</h1>
      <br>
      <br>
      <button class="sbtn" style="width: 148.46px;" onclick="cloak()">Instant About:Blank</button>
      <button class="sbtn-red" style="width: 148.46px;" onclick="disableCloak()">Disable
        About:Blank</button>
    </div>

    <div class="setting">
      <br>
      <h1 class="large">Panic Key</h1>
      <input class="search-bar" style="width:270px;height:50px;margin:10px;border-radius:999px;" type="text"
        id="panicKey" placeholder="Enter panic key">
      <input class="search-bar" style="width:270px;height:50px;margin:10px;border-radius:999px;" type="text"
        id="panicUrl" placeholder="Enter panic URL">
      <button class="sbtn" onclick="setPanicKey()">Set Panic Key</button>
      <button class="sbtn" onclick="removePanicKey()">Disable Panic Key</button>
    </div>

  </div>
  <script src="/assets/js/index.js"></script>
  <script src="/uv/uv.bundle.js"></script>
  <script src="/uv/uv.config.js"></script>
  <script>
    // Custom Background Check
    var bgUrl = localStorage.getItem('backgroundImage');
    if (bgUrl === 'none' || bgUrl === null || bgUrl === '') {
      document.body.style.backgroundImage = `url('/assets/img/snorlax_background.jpg')`;
    } else {
      document.body.style.backgroundImage = `url(${bgUrl})`;
    }
  </script>
  <script>
    function changeTabName() {
      var name = document.getElementById('name').value;
      document.title = name;
      localStorage.setItem('tabName', name);
    }

    function loadTabName() {
      var name = localStorage.getItem('tabName');
      if (name) {
        document.title = name;
        document.getElementById('name').value = name;
      }
    }

    window.addEventListener('load', loadTabName);
  </script>
  <script>
    function setPanicKey() {
      var panicKey = document.getElementById("panicKey").value;
      var panicUrl = document.getElementById("panicUrl").value;

      if (!panicUrl.startsWith("https://")) {
        panicUrl = "https://" + panicUrl;
      }

      localStorage.setItem("panicKey", panicKey);
      localStorage.setItem("panicUrl", panicUrl);
    }

    document.addEventListener("keydown", function (event) {
      var storedPanicKey = localStorage.getItem("panicKey");
      var storedPanicUrl = localStorage.getItem("panicUrl");

      if (event.key === storedPanicKey && storedPanicUrl) {
        window.location.replace(storedPanicUrl);
      }
    });
  </script>
  <script>
    var defaultIcon = "/assets/img/newlogo.png";

    function changeIcon() {
      var iconUrl = document.getElementById("iconUrl").value;
      if (!iconUrl) {
        iconUrl = defaultIcon;
      }
      localStorage.setItem("iconUrl", iconUrl);

      var link = document.querySelector("link[rel*='icon']");
      if (link) {
        link.parentNode.removeChild(link);
      }

      var newLink = document.createElement("link");
      newLink.type = "image/x-icon";
      newLink.rel = "icon";
      newLink.href = iconUrl;
      document.head.appendChild(newLink);
    }

    window.addEventListener("DOMContentLoaded", function () {
      var storedIconUrl = localStorage.getItem("iconUrl");
      if (storedIconUrl) {
        document.getElementById("iconUrl").value = storedIconUrl;
        changeIcon();
      } else {
        changeIcon();
      }
    });
  </script>
  <script>
    window.onload = function () {
      var savedImage = localStorage.getItem('backgroundImage');
      if (savedImage) {
        var output = document.body;
        output.style.backgroundImage = "url('" + savedImage + "')";
        output.style.backgroundSize = "cover";
        output.style.backgroundRepeat = "no-repeat";
      }
    };

    var loadFile = function () {
      document.getElementById('fileInput').click();
    };

    var showImage = function (event) {
      var reader = new FileReader();
      reader.onload = function () {
        var output = document.body;
        output.style.backgroundImage = "url('" + reader.result + "')";
        output.style.backgroundSize = "cover";
        output.style.backgroundRepeat = "no-repeat";

        localStorage.setItem('backgroundImage', reader.result);
      };
      reader.readAsDataURL(event.target.files[0]);
    };
  </script>
  <script>
    function checkPopups() {
      var newWin = window.open("", "", "width=100, height=100");
      if (newWin) {
        newWin.close();
        say2();
      }
    }

    function say2() {
      Swal.fire({
        title: "Whoops",
        text: "Changing the tab name icon does not work in about:blank. To use this feature, please block this tab's popups in your site settings.",
        icon: "warning"
      });


    }
  </script>
  <script>
    const visited = localStorage.getItem('visited');
    if (!visited) {
      Swal.fire({
        title: "Welcome",
        text: "Welcome to Snorlax's Cave! (version 3.2.1)",
        showClass: {
          popup: `
          animate__animated
          animate__fadeInUp
          animate__faster
        `
        },
        hideClass: {
          popup: `
          animate__animated
          animate__fadeOutDown
          animate__faster
        `
        }
      });
      localStorage.setItem('visited', true);
    }
  </script>
  <script>
    window.addEventListener('keydown', (event) => {
      const keysPressed = (event.key === '~');
      if (keysPressed) {
        localStorage.clear();
        Swal.fire({
          title: "Cleared",
          text: "All settings save data (localStorage) has been cleared!",
          icon: "success"
        });
        location.reload(true);
      }
    });
  </script>
  <script>
    window.addEventListener('keydown', (event) => {
      const keysPressed = (event.key === '`');
      if (keysPressed) {
        document.cookie.split(";").forEach(cookie => {
          document.cookie = cookie.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/");
        });
        Swal.fire({
          title: "Cookies cleared!",
          text: "All saved cookies stored have been cleared.",
          icon: "success"
        });
        location.reload(true);
      }
    });
  </script>
  <script>
    const firstVisit = localStorage.getItem('firstVisit');
    if (!firstVisit) {
      Swal.fire({
        title: "Pro tip",
        text: "Pushing ~ will clear all settings data and pushing ` will clear all cookies. Works on any page!",
        icon: "info"
      });

      localStorage.setItem('firstVisit', true);
    }
    function disableCloak() {
      Swal.fire({
        title: "Warning",
        text: "About:Blank prevents Snorlax's Cave links from getting blocked. If you click confirm, Auto-About:Blank will be disabled for 15 minutes.",
        icon: "warning",
        showCancelButton: true,
        showDenyButton: true,
        confirmButtonText: "Confirm",
        denyButtonText: "Deny, and go into About:Blank"
      }).then((result) => {
        
        if (result.isConfirmed) {
          Swal.fire("Disabled for 15 minutes.", "", "success");
          localStorage.setItem("endTime", new Date().addMinutes(15))
          
          localStorage.setItem("aboutBlankDisabled", "true")
        } else if (result.isDenied) {
          cloak()
        }
      });;
    }
  </script>
  <script src="/assets/js/disabledAboutBlank.js"></script>
</body>

</html>